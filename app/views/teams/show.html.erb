<h1><%= @team.name %></h1>
<div id="coach-info">
<% if @team.coach_id != 5 %>
    <div id="coach-contact-box">
        <strong>Coach <%= @team.coach.last_name %> Contact info</strong>
        <p id="coach-info-box">
            <%= link_to "#{@team.coach.name}", coach_path(@team.coach) %><br>
            <%= @team.coach.email %><br>
            <%= @team.coach.phone_number %>
        </p>
    </div><br>
<% else %>
    <strong>Coach: <%= @team.coach.name %></strong>
<% end %>
<% if logged_in? && current_user.admin? %>
    <%= form_for @team, url: {action: 'update'}  do |f| %>
        <%= f.label "Assign or change coach" %>
        <%= f.collection_select(:coach_id, Coach.all, :id, :name) %><br>
        <%= f.submit %>
    <% end %> 
<% end %>  

<div id="schedule-box">
    <h2> Schedule: </h2>
        <% @team.matches.each do |m| %>
            <div id="match-display">
                <%= m.teams_display %><br>
                <%= link_to "#{m.date_and_time}", competition_match_path(m.competition.id, m) %><br>
                <%= link_to "#{m.location.name}", location_path(m.location) %><br>
                <%= m.location_notes %><br><br>
            </div><br>
        <% end %>
</div>

<h2>Roster:</h2>
<% if @team.players.count > 0 %>
    <table>
        <tr>
            <th> Player Name </th>
            <th> Jersey Number </th>
            <% if logged_in? && current_user.admin? || logged_in? && current_user.coach? %>
                <th> Phone Number </th>
                <th> Email </th>
                <th></th>
            <% end %>
        </tr>
            
        <% @team.players.each do |p| %>
            <% if p.id != nil %>
            <tr>
                <td><%= p.name %></td>
                <td><%= p.jersey_number %></td>
                <% if logged_in? && current_user.admin? || logged_in? && current_user.coach? %>
                    <td><%= p.phone_number %></td>
                    <td><%= p.email %></td>
                    <td><%= link_to "edit", edit_team_player_path(p.team_id, p) %></td>
                <% end %>
            </tr>
            <% end %>
        <% end %>
    </table>
<% else %>
    <h3>There are no players in this team yet</h3>
<% end %>


<% if logged_in? && current_user.admin? || logged_in? && current_user.coach? %>
    <h3> Add a New player </h3>
    <%= form_for(@player, url: team_players_path(@player.team_id, @player)) do |f| %>
        <%= f.label :name %>
        <%= f.text_field :name %>
        <%= f.label :jersey_number %>
        <%= f.text_field :jersey_number %><br>
        <%= f.label :email %>
        <%= f.text_field :email %>
        <%= f.label :phone_number %>
        <%= f.text_field :phone_number %><br>
        <%= f.submit %>
    <% end %>
<% end %>

<% if logged_in? && current_user.admin? %>
    <%= link_to "Delete this team", team_path(@team), :method => 'delete' %>
<% end %>